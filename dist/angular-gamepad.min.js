/*! angular-gamepad 27-01-2015 */
var ng;!function(a){var b;!function(a){"use strict";var b=function(){function a(a,b){a.count=0,a.gamepads={},a.$on("gamepad:connected",function(c,d){a.gamepads[d.index]=angular.copy(d),a.count=b.getGamepadCount(),a.$apply()}),a.$on("gamepad:updated",function(c,d){a.gamepads[d.index]=angular.copy(d),a.count=b.getGamepadCount(),a.$apply()}),a.$on("gamepad:disconnected",function(c,d){delete a.gamepads[d],a.count=b.getGamepadCount(),a.$apply()})}return a.$inject=["$scope","$gamepad"],a}();a.GamepadController=b}(b=a.gamepad||(a.gamepad={}))}(ng||(ng={}));var ng;!function(a){var b;!function(a){"use strict";var b=function(){function a(a){this.$rootScope=a,this.manual=!1,this.gamepads={},this.count=0}return a.prototype.isSupported=function(){return!!("getGamepads"in navigator)},a.prototype.isPollingManual=function(){return this.manual},a.prototype.manualPolling=function(a){return this.manual=a,this},a.prototype.getGamepadCount=function(){return this.count},a.prototype.getGamepad=function(a){return this.gamepads[a]},a.prototype.poll=function(){var b,c=navigator.getGamepads(),d={};for(b in this.gamepads)d[b]=null;for(b=0;b!=c.length;++b){var e=c[b];if(e){var f,g,h=e.buttons,i=e.axes,j=!1,k=!1;e.index in this.gamepads?f=this.gamepads[e.index]:(f=this.gamepads[e.index]={index:e.index,id:null,mapping:null,buttons:angular.copy(a.DEFAULT_BUTTONS),DPad:angular.copy(a.DEFAULT_DPAD),LS:angular.copy(a.DEFAULT_AXIS),RS:angular.copy(a.DEFAULT_AXIS)},k=!0),f.id=e.id;for(g in a.BUTTON_MAPPING){var l=a.BUTTON_MAPPING[g],m=l<h.length?h[l].value:0;f.buttons[g]!==m&&(f.buttons[g]=m,j=!0)}for(g in a.DPAD_MAPPING){var l=a.DPAD_MAPPING[g],m=l<h.length?h[l].value:0;f.DPad[g]!==m&&(f.DPad[g]=m,j=!0)}for(g in a.AXIS_MAPPING){var n=a.AXIS_MAPPING[g];for(var o in n){var p=n[o],m=p<i.length?i[p]:0;f[g][o]!==m&&(f[g][o]=m,j=!0)}}delete d[f.index],k&&(++this.count,this.$rootScope.$broadcast("gamepad:connected",f)),j&&this.$rootScope.$broadcast("gamepad:updated",f)}}for(b in d)--this.count,this.$rootScope.$broadcast("gamepad:disconnected",b),delete this.gamepads[b]},a.prototype.$get=function(){return this},a.BUTTON_MAPPING={A:0,B:1,X:2,Y:3,L1:4,L2:6,LS:10,R1:5,R2:7,RS:11,Select:8,Start:9},a.DPAD_MAPPING={Up:12,Down:13,Right:15,Left:14},a.AXIS_MAPPING={LS:{X:0,Y:1},RS:{X:2,Y:3}},a.DEFAULT_BUTTONS={A:0,B:0,X:0,Y:0,L1:0,L2:0,LS:0,R1:0,R2:0,RS:0,Select:0,Start:0,Guide:0},a.DEFAULT_DPAD={Up:0,Down:0,Left:0,Right:0},a.DEFAULT_AXIS={X:0,Y:0},a.$inject=["$rootScope"],a}();a.GamepadService=b}(b=a.gamepad||(a.gamepad={}))}(ng||(ng={}));var ng;!function(a){var b;!function(a){"use strict";angular.module("ngGamepad",[]).service("$gamepad",a.GamepadService).controller("GamepadCtrl",a.GamepadController).run(["$gamepad",function(a){function b(){a.poll(),window.requestAnimationFrame(b)}!a.isPollingManual()&&a.isSupported()&&(b(),window.addEventListener("gamepadconnected",function(){console.log("gamepad connected")}),window.addEventListener("gamepaddisconnected",function(){console.log("gamepad disconnected")}))}])}(b=a.gamepad||(a.gamepad={}))}(ng||(ng={}));